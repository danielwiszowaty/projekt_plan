%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                            %
%   W Z O R Z E C   S P R A W O Z D A N I A  %
%                                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\documentclass[12pt,a4paper,twoside]{article}

\usepackage{amsmath,amssymb}
\usepackage[utf8]{inputenc}                                      
\usepackage[OT4]{fontenc}      
%\usepackage[T1]{fontenc}                            
\usepackage[polish]{babel}                           
\selectlanguage{polish}
\usepackage{indentfirst} 
\usepackage[dvips]{graphicx}
\usepackage{tabularx}
\usepackage{color}
\usepackage{hyperref} 
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage{booktabs}
\usepackage{ifpdf}
\usepackage{mathtext} % polskie znaki w trybie matematycznym
%\makeindex  % utworzenie skorowidza (w dokumencie pdf)
\usepackage{lmodern}
%\usepackage[osf]{libertine}
\usepackage{filecontents}
\usepackage{ifthen}
\usepackage{spverbatim}


\usepackage{tikz}
\usetikzlibrary{arrows}


\newcounter{nextYear}
\setcounter{nextYear}{\the\year}
\stepcounter{nextYear}

% rozszerzenie nieco strony
%\setlength{\topmargin}{-1cm} \setlength{\textheight}{24.5cm}
%\setlength{\textwidth}{17cm} \addtolength{\hoffset}{-1.5cm}
%\setlength{\parindent}{0.5cm} \setlength{\footskip}{2cm}
%\linespread{1.2} % odstep pomiedzy wierszami


%%%% ZYWA PAGINA %%%%%%%%%%%
\newcommand{\tl}[1]{\textbf{#1}} 
\pagestyle{fancy}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\fancyhf{} % usuwanie bieżących ustawień
\fancyhead[LE,RO]{\small\bfseries\thepage}
\fancyhead[LO]{\small\bfseries\rightmark}
\fancyhead[RE]{\small\bfseries\leftmark}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0pt}
\addtolength{\headheight}{0.5pt} % pionowy odstęp na kreskę
\fancypagestyle{plain}{%
\fancyhead{} % usuń p. górne na stronach pozbawionych numeracji
\renewcommand{\headrulewidth}{0pt} % pozioma kreska
}

%%%%%   LISTINGI %%%%%%%%
% ustawienia listingu programow

\lstset{%
language=C++,%
commentstyle=\textit,%
identifierstyle=\textsf,%
keywordstyle=\sffamily\bfseries, %
%captionpos=b,%
tabsize=3,%
frame=lines,%
numbers=left,%
numberstyle=\tiny,%
numbersep=5pt,%
breaklines=true,%
morekeywords={pWezel,Wezel,string,ref,params_result},%
escapeinside={(*@}{@*)},%
%basicstyle=\footnotesize,%
%keywords={double,int,for,if,return,vector,matrix,void,public,class,string,%
%float,sizeof,char,FILE,while,do,const}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%  NOTKI NA MARGINESIE %%%%%%%%%%%%%
% mala zmiana sposobu wyswietlania notek bocznych
\let\oldmarginpar\marginpar
\renewcommand\marginpar[1]{%
  {\linespread{0.85}\normalfont\scriptsize%
\oldmarginpar[\hspace{1cm}\begin{minipage}{3cm}\raggedleft\scriptsize\color{black}\textsf{#1}\end{minipage}]%    left pages
{\hspace{0cm}\begin{minipage}{3cm}\raggedright\scriptsize\color{black}\textsf{#1}\end{minipage}}% right pages
}%
}
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %

%%%% WYSWIETLANIE AKTUALNEGO ROKU AKADEMICKIEGO %%%%%%%%%%%
\newcounter{rok}
\newcommand{\rokakademicki}{%
   \setcounter{rok}{\number\year}%
   \ifthenelse{\number\month<10}%
   {\addtocounter{rok}{-1}}% rok akademicki zaczal sie w pazdzierniku poprzedniego roku
   {}%                       rok akademicki zaczyna sie w pazdzierniku tego roku
   \arabic{rok}/\addtocounter{rok}{1}\arabic{rok}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%% LISTA UWAG %%%%%%%%%
\usepackage{color}
\definecolor{brickred}      {cmyk}{0   , 0.89, 0.94, 0.28}

\makeatletter \newcommand \kslistofremarks{\section*{Uwagi} \@starttoc{rks}}
\newcommand\l@uwagas[2]
{\par\noindent \textbf{#2:} %\parbox{10cm}
   {#1}\par} \makeatother


\newcommand{\ksremark}[1]{%
   {{\color{brickred}{[#1]}}}%
   \addcontentsline{rks}{uwagas}{\protect{#1}}%
}

\newcommand{\comma}{\ksremark{przecinek}}
\newcommand{\nocomma}{\ksremark{bez przecinka}}
\newcommand{\styl}{\ksremark{styl}}
\newcommand{\ortografia}{\ksremark{ortografia}}
\newcommand{\fleksja}{\ksremark{fleksja}}
\newcommand{\pauza}{\ksremark{pauza `--', nie dywiz `-'}}
\newcommand{\kolokwializm}{\ksremark{kolokwializm}}
\newcommand{\cytowanie}{\ksremark{cytowanie}}

%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%



% autor:
\fancyhead[RE]{\small\bfseries Daniel Wiszowaty} % autor sprawozdania



%%%%%%%%%%% NO I ZACZYNA SIE SPRAWOZDANIE %%%%%%%%%%%

\begin{document}
\frenchspacing
\thispagestyle{empty}
\begin{center}
{\Large\sf Politechnika Śląska   % Alma Mater

Wydział Informatyki, Elektroniki i Informatyki

}

\vfill

 

\vfill\vfill

{\Huge\sffamily\bfseries Podstawy Programowania Komputerów\par}  

\vfill\vfill

{\LARGE\sf Plan}   


\vfill \vfill\vfill\vfill

%%%%%%%%%%%%%%%%%%%%%%%%%%%%





\begin{tabular}{ll}
	\toprule
	autor                       & Daniel Wiszowaty    \\
	prowadzący                  & dr inż. Artur Pasierbek  \\
	rok akademicki              & \rokakademicki         \\
	kierunek                    & informatyka            \\
	rodzaj studiów              & SSI                    \\
	semestr                     & 1                      \\
	termin laboratorium         & poniedziałek, 08:30 -- 10:00 \\
	sekcja                      & 22                     \\
	termin oddania sprawozdania & 2019-MM-DD             \\
	\bottomrule
	                            &
\end{tabular}

\end{center}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\cleardoublepage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Treść zadania}
\marginpar{}
W pliku zawarte są dane zajęć w następującym formacie: \newline \newline
\begin{tabular}{ll}
\footnotesize
\centering (godzina rozpoczęcia)-(godzina zakończenia) (dzień) (grupa) (prowadzący) (przedmiot)
\end{tabular} \newline

\noindent Godzina jest podana w formacie: \texttt{hh:mm}, dzień przyjmuje wartości: \texttt{pn}, \texttt{wt}, \texttt{sr}, \texttt{cz}, \texttt{pt}, \texttt{sb}, \texttt{nd}. Grupa,
prowadzący i przedmiot to pojedyncze wyrazy. Przykładowy plik: \newline

\begin{tabular}{ll}
\texttt{08:30-10:00 pt gr1 Kowalski Programowanie} \\
\texttt{10:15-11:45 wt gr2 Nowak Fizyka} \\
\texttt{14:34-15:43 sr gr2 Kowalski Java} \\
\texttt{07:23-19:34 cz gr1 Nowak Astronomia} \\
\end{tabular} \newline

\noindent W wyniku działania programu powstają pliki dla każdego prowadzącego (nazwa pliku jest tożsama z
nazwiskiem prowadzącego) zawierający plan zajęć dla prowadzącego. Kolejne wpisu planu są posortowane chronologicznie. Przykładowy plik \texttt{Kowalski.txt}: \newline

\begin{tabular}{ll}
\texttt{14:34-15:43 sr gr2 Java} \\
\texttt{08:30-10:00 pt gr1 Programowanie} \\
\end{tabular} \newline

Program uruchamiany jest z linii poleceń z wykorzystaniem następującego przełącznika: \\
\begin{tabular}{ll}
\indent \texttt{-i} & plik wejściowy \\
\end{tabular}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Analiza zadania}
\marginpar{}

Zagadnienie przedstawia problem sortowania planu zajęć zapisanych w pliku wejściowym oraz przydzielanie posortowanych planów odpowiadającym prowadzącym.

\subsection{Struktury danych}
\marginpar{}
W programie wykorzystano listę podwieszaną. Lista nadrzędna przechowuje informacje o nazwisku prowadzącego. Lista nadrzędna zawiera wskaźnik na drzewo binarne, które przechowuje informacje o godzinie, dniu, grupie i przedmiocie. Drzewo posortowane jest według daty tj. dnia i godziny. Taka struktura umożliwia łatwe posortowanie i wypisanie planu każdego prowadzącego.

\begin{figure}
\centering
\begin{tikzpicture}%
[square/.style={%
            draw,
            minimum width=width("#1"),
            minimum height=width("#1")+2*\pgfshapeinnerysep,
            node contents={#1}}]
            
%draw [help lines] grid (7,7);
\node at (1,7) (Kowalska) [square={$A$}];
	\node at (3,7) (Kamiński) [square={$B$}];
		\node at (5,7) (Nowak) [square={$C$}];
\node at (1, 5) [circle,draw] (A) {$15$};
	\node at (0, 3) [circle,draw] (B) {$12$};
			\node at (2, 3) [circle,draw] (C) {$17$};
				\node at (1, 1) [circle,draw] (D) {$16$};

\node at (3, 5) [circle,draw] (E) {$4$};
	\node at (4, 3) [circle,draw] (F) {$6$};
	
\node at (5, 5) [circle,draw] (G) {$13$};
		\node at (6, 3) [circle,draw] (H) {$28$};
			\node at (5, 1) [circle,draw] (I) {$18$};
				\node at (7, 1) [circle,draw] (J) {$45$};



\draw[>=latex,->] (Kowalska) -- (Kamiński);
\draw[>=latex,->] (Kamiński) -- (Nowak);
\draw[>=latex,->] (Kowalska) -- (A);
\draw[>=latex,->] (A) -- (B);
\draw[>=latex,->] (A) -- (C);
\draw[>=latex,->] (C) -- (D);
\draw[>=latex,->] (Kamiński) -- (E);
\draw[>=latex,->] (Nowak) -- (G);
\draw[>=latex,->] (G) -- (H);
\draw[>=latex,->] (H) -- (I);
\draw[>=latex,->] (H) -- (J);
\draw[>=latex,->] (G) -- (F);


\end{tikzpicture}
\caption{Przykład listy podwieszanej. 
\newline Dla elementu \texttt{A} zostały dodane liczby w kolejności 15, 12, 17, 16}
\label{fig:lista_podwieszana}
\end{figure} 


\subsection{Algorytmy}
\marginpar{}
Program sortuje zajęcia poprzez umieszczenie ich w drzewie binarnym. Wypisanie zajęć realizowane jest przez rekurencyjne przejście przez drzewo. Wypisanie planu dla każdego prowadzącego realizowane jest przez rekurencyjne przejście przez listę i wypisanie odpowiadającego mu drzewa.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Specyfikacja zewnętrzna}
\marginpar{}

Program jest uruchamiany z linii poleceń. 
Przy wywoływaniu programu możliwe jest użycie przełączników  \texttt{-h},  \texttt{-i} oraz \texttt{-g}\\
Wykorzystanie przełącznika  \texttt{-h} wyświetla instrukcje dla użytkownika obsługi programu. 
Po wykorzystaniu przełącznika  \texttt{-i} należy przekazać do programu nazwę pliku wejściowego.
Przełącznik \texttt{-g} generuje zadaną ilość wierszy do pliku wyjściowego. Domyślnie jest to format \texttt{.txt} \newline \newline
Przykładowe wywołanie programu:
\begin{verbatim}
./main -h
./main -g plik 100
./main -i plik.txt
\end{verbatim}

Program zapisuje plan zajęć w pliku tekstowym w folderze zewnętrznym \texttt{pliki}. Plik tekstowy dla każdego prowadzącego jest nazwany nazwiskiem prowadzącego.
Pliki wejściowe mogą mieć dowolne rozszerzenie (lub go nie mieć.).

\begin{verbatim}
./main 
./main -h
\end{verbatim}
powoduje wyświetlenie krótkiej pomocy. Instrukcja wyświetlania jest również w wyniku podania niepoprawnych danych. 

\begin{verbatim}
./main -g plik ilośćwierszy
\end{verbatim}
Uruchomienie programu z parametrem \texttt{-g} powoduje wygenerowanie pliku \texttt{plik.txt} w folderze \texttt{pliki} zawierający losowy plan zajęć o zadanej przez użytkownika ilości wierszy który następnie można posortować. Gdy generowanie się powiedzie na ekranie pojawi się komunikat:
\begin{verbatim}
Wygenerowano plik <plik.txt> w folderze pliki
\end{verbatim}. \newline
Uruchomienie programu z nieprawidłowymi parametrami powoduje wyświetlenie komunikatu
\begin{verbatim}
Podano zle argumenty do programu!
\end{verbatim}
i wyświetlenie pomocy. \newline 

Podanie nieprawidłowej nazwy pliku powoduje wyświetlenie odpowiedniego komunikatu:
\begin{verbatim}
Plik plik.txt nie istnieje lub jest wadliwy
\end{verbatim}

Podanie za dużej ilości argumentów powoduje wyświetlenie komunikatu:
\begin{verbatim}
Podano za dużo argumentów do programu
\end{verbatim}




\subsection{Ogólna struktura programu}
\marginpar{}
W funkcji głównej wywołana jest funkcja \lstinline|pobierzParametry|.
Funkcja ta sprawdza, czy program został wywołany w prawidłowy sposób. Gdy program nie został wywołany prawidłowo, zostaje wypisany stosowny komunikat i program się kończy.
Następnie wywoływana jest funkcja \lstinline|sprawdzPlik|.
Funkcja ta przy pomocy wyrażeń regularnych sprawdza poprawność całego pliku wejściowego. Jeżeli plik jest nieodpowiedni na ekranie zostanie ukazany komunikat z numerem niepoprawnej linii.
Funkcja zwraca \texttt{true} jeżeli plik jest poprawny a następnie zostaje wywołana funkcja \lstinline|odczytajZPliku| która wczytuje kolejne linijki pliku do listy podwieszanej.
Wywołana zostaje funkcja \lstinline|wypiszWszystkeZajecia|.
Funkcja przechodzi rekurencyjnie przez listę, wypisuje każde drzewo zapisuje posortowane zajęcia do plików wyjściowych. Po zapisaniu liczb funkcja zamyka plik. 
Ostatnią funkcją programu jest funkcja zwalniająca pamięć \lstinline|usunWszystko|.


\subsection{Szczegółowy opis typów i funkcji}

Szczegółowy opis typów i funkcji zawarty jest w załączniku.

 

\section{Testowanie}
\marginpar{}
Program testuje poprawność pliku przy użyciu wyrażeń regularnych. Pliki niepoprawne (niezawierające liczb, zawierający liczby w niepoprawnym formacie, niezgodne ze specyfikacją) powodują zgłoszenie błędu. Plik pusty nie powoduje zgłoszenia błędu, ale utworzenie pustego pliku wynikowego (został podany pusty plan i pusty plan został zwrócony).

Program został sprawdzony pod kątem wycieków pamięci przy użyciu biblioteki NVWA.

%\section{Uzyskane wyniki}
%Jeżeli zadanie tego wymaga, wyniki można przestawić w~różny sposób, np. w tabeli ({\it vide} tabela \ref{tab:1}), czy na~rysunku ({\it vide} rycina \ref{fig:rysunek}) albo po prostu opisać uzyskane wyniki.
%



\section{Wnioski}
\marginpar{}
Program do sortowania planu zajęć nie był programem trudnym, ale kluczowe było zastosowanie odpowiedniej struktury. Najtrudniejsze okazało się sprawdzenie poprawności danych w pliku wejściowym. 

 
\begin{filecontents}{bibliografia.bib}

}
\end{filecontents}


\cite{id:Cormen2001Wprowadzenie}.

\bibliographystyle{plplain}
\bibliography{bibliografia}

 
\cleardoublepage

\rule{0cm}{0cm}

\vfill

\begin{center}
\Huge\bfseries Dodatek\\Szczegółowy opis typów i~funkcji\par
\end{center}

\vfill 

\rule{0cm}{0cm}

\end{document}
% Koniec wieńczy dzieło.
